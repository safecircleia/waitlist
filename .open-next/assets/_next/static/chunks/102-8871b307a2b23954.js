"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[102],{1636:(e,a,t)=>{t.d(a,{A:()=>k});var r=t(6384),s=t(6636),i=t(8959),l=t(2893),n=t(6175),o=t(1614),d=t(3983);async function c(e){try{let a=await fetch("/api/waitlist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await a.json()}catch(e){return{success:!1,message:"An unexpected error occurred"}}}d.z.object({email:d.z.string().email("Please enter a valid email address"),name:d.z.string().min(2,"Name must be at least 2 characters").max(100),company:d.z.string().optional(),referralCode:d.z.string().optional()});var m=t(5212),u=t(2944),f=t(2142),x=t(1116),h=t(5397),p=t(9945),b=t(4949),g=t(304),y=t(4127),v=t(4582),j=t(4179);function w(e){let{show:a}=e,[t,n]=(0,s.useState)(a);return(0,s.useEffect)(()=>{if(n(a),a){let e=setTimeout(()=>{n(!1)},5e3);return()=>clearTimeout(e)}},[a]),(0,r.jsx)(i.N,{children:t&&(0,r.jsxs)(l.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,ease:"easeOut"},className:"fixed top-4 right-4 bg-[#1a1a1a]/80 border border-[#333333] rounded-lg p-3 shadow-lg z-50 flex items-center backdrop-blur-sm",children:[(0,r.jsx)(j.A,{className:"h-4 w-4 text-white mr-2"}),(0,r.jsx)("span",{className:"text-sm text-white",children:"Email notification sent to referrer!"})]})})}function N(e){let{progress:a}=e;return(0,r.jsx)("div",{className:"w-full h-1 bg-[#1a1a1a] rounded-full overflow-hidden",children:(0,r.jsx)(l.P.div,{className:"h-full bg-white",initial:{width:0},animate:{width:"".concat(a,"%")},transition:{duration:.5}})})}var _=t(9100);let C=d.z.object({email:d.z.string().email("Please enter a valid email address"),name:d.z.string().min(2,"Name must be at least 2 characters").max(100),company:d.z.string().optional(),referralCode:d.z.string().optional()});function k(e){var a,t;let{user:d,onSubmitSuccess:m}=e,u=(0,v.useSearchParams)(),[f,g]=(0,s.useState)(!1),[y,j]=(0,s.useState)({}),[k,A]=(0,s.useState)(!1),[I,R]=(0,s.useState)(0),[E,T]=(0,s.useState)(!0),{register:F,handleSubmit:J,setValue:M,watch:O,formState:{errors:q,isValid:H,isDirty:U},reset:X}=(0,n.mN)({resolver:(0,o.u)(C),mode:"onChange",defaultValues:{name:(null==d?void 0:d.name)||"",email:(null==d?void 0:d.email)||""}});(0,s.useEffect)(()=>{(null==d?void 0:d.name)&&M("name",d.name),(null==d?void 0:d.email)&&M("email",d.email)},[d,M]);let Y=O(["name","email","company"]);(0,s.useEffect)(()=>{let e=0;Y[0]&&Y[0].length>=2&&(e+=40),Y[1]&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Y[1])&&(e+=40),Y[2]&&Y[2].length>0?e+=20:H&&U&&(e+=20),R(e)},[Y,H,U]),(0,s.useEffect)(()=>{if(!(null==d?void 0:d.email))return void T(!1);(async()=>{try{console.log("WaitlistForm - Checking if user already joined waitlist:",d.email);let e=(0,_.k)(),{data:a,error:t}=await e.from("waitlist").select("referral_code").eq("email",d.email).single();console.log("WaitlistForm - Waitlist check response:",a,t),(null==a?void 0:a.referral_code)&&m&&(console.log("WaitlistForm - User already on waitlist, calling onSubmitSuccess"),m(a.referral_code))}catch(e){console.error("Error checking waitlist status:",e)}finally{T(!1)}})()},[d,m]);let Z=async e=>{g(!0);try{let a=await c(e);j(a),a.success&&(X(),R(0),a.referralCode&&m&&m(a.referralCode),e.referralCode&&A(!0))}catch(e){j({success:!1,message:"An unexpected error occurred. Please try again."})}finally{g(!1)}};return(0,r.jsxs)("div",{className:"w-full max-w-md mx-auto",children:[(0,r.jsx)(w,{show:k}),(0,r.jsx)(i.N,{mode:"wait",children:E?(0,r.jsxs)("div",{className:"bg-gradient-to-b from-[#0f0f0f]/90 to-[#0a0a0a]/90 backdrop-blur-md p-8 rounded-2xl border border-[#1a1a1a] shadow-xl relative overflow-hidden flex flex-col items-center justify-center min-h-[200px]",children:[(0,r.jsx)(x.A,{className:"h-8 w-8 text-white animate-spin mb-4"}),(0,r.jsx)("p",{className:"text-[#a0a0a0] text-sm",children:"Checking waitlist status..."})]}):y.success?(0,r.jsx)(P,{referralCode:y.referralCode,onReset:()=>j({})}):(0,r.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.5,ease:[.22,1,.36,1]},className:"bg-gradient-to-b from-[#0f0f0f]/90 to-[#0a0a0a]/90 backdrop-blur-md p-8 rounded-2xl border border-[#1a1a1a] shadow-xl relative overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top_right,_rgba(120,_120,_120,_0.05),_transparent_60%)]"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_bottom_left,_rgba(120,_120,_120,_0.05),_transparent_60%)]"}),(0,r.jsxs)("div",{className:"relative z-10",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white tracking-tight",children:"Join the waitlist"}),(0,r.jsx)("div",{className:"h-10 w-10 rounded-full bg-[#1a1a1a] flex items-center justify-center",children:(0,r.jsx)(h.A,{className:"h-5 w-5 text-white opacity-70"})})]}),(0,r.jsx)(N,{progress:I}),(0,r.jsxs)("form",{onSubmit:J(Z),className:"space-y-6 mt-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(S,{id:"name",label:"Full Name",placeholder:"Enter your name",icon:(0,r.jsx)(p.A,{className:"h-4 w-4 text-[#666666]"}),error:null==(a=q.name)?void 0:a.message,...F("name")}),(0,r.jsx)(S,{id:"email",label:"Email Address",type:"email",placeholder:"you@example.com",icon:(0,r.jsx)(h.A,{className:"h-4 w-4 text-[#666666]"}),error:null==(t=q.email)?void 0:t.message,...F("email")}),(0,r.jsx)(S,{id:"company",label:"Company (optional)",placeholder:"Your organization",icon:(0,r.jsx)(b.A,{className:"h-4 w-4 text-[#666666]"}),...F("company")}),(0,r.jsx)("input",{type:"hidden",...F("referralCode")})]}),u.get("ref")&&(0,r.jsx)(l.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-3 bg-[#1a1a1a]/50 backdrop-blur-sm border border-[#333333] rounded-lg",children:(0,r.jsx)("p",{className:"text-xs text-[#a0a0a0]",children:"You've been referred by a friend. You'll get priority access to SafeCircle."})}),y.message&&!y.success&&(0,r.jsx)(l.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-3 bg-[#2a1215]/50 backdrop-blur-sm border border-[#5c2428] rounded-lg",children:(0,r.jsx)("p",{className:"text-xs text-[#ff4d4f]",children:y.message})}),(0,r.jsx)(z,{isSubmitting:f,isValid:H&&U}),(0,r.jsx)("div",{className:"text-center mt-4",children:(0,r.jsxs)("p",{className:"text-[#666666] text-xs",children:["By joining, you agree to our"," ",(0,r.jsx)("a",{href:"#",className:"text-white hover:text-[#a0a0a0] transition-colors",children:"Terms"})," ","and"," ",(0,r.jsx)("a",{href:"#",className:"text-white hover:text-[#a0a0a0] transition-colors",children:"Privacy Policy"})]})})]})]})]},"form")})]})}function S(e){let{id:a,label:t,error:s,icon:n,...o}=e;return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(f.J,{htmlFor:a,className:"text-[#a0a0a0] text-sm font-medium flex items-center",children:t}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:n}),(0,r.jsx)(u.p,{id:a,className:"h-11 pl-10 pr-3 bg-[#0d0d0d] border-[#222222] text-white placeholder:text-[#555555] text-sm transition-all duration-200\n            ".concat(s?"border-[#ff4d4f] focus:ring-[#ff4d4f]":"border-[#222222] focus:border-[#444444] focus:ring-[#444444]","\n            hover:border-[#333333]"),...o})]}),(0,r.jsx)(i.N,{children:s&&(0,r.jsx)(l.P.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-xs text-[#ff4d4f] mt-1",children:s})})]})}function z(e){let{isSubmitting:a,isValid:t}=e;return(0,r.jsx)(l.P.div,{whileHover:t&&!a?{scale:1.02}:{},whileTap:t&&!a?{scale:.98}:{},children:(0,r.jsx)(m.$,{type:"submit",disabled:a||!t,className:"w-full h-12 rounded-lg text-sm font-medium transition-all duration-300\n          ".concat(t?"bg-white hover:bg-[#f0f0f0] text-black":"bg-[#1a1a1a] text-[#666666] cursor-not-allowed"),children:a?(0,r.jsx)(x.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,r.jsxs)("span",{className:"flex items-center",children:["Request Access ",(0,r.jsx)(g.A,{className:"ml-2 h-4 w-4"})]})})})}function P(e){let{referralCode:a,onReset:t}=e;return(0,r.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.5,ease:[.22,1,.36,1]},className:"bg-gradient-to-b from-[#0f0f0f]/90 to-[#0a0a0a]/90 backdrop-blur-md p-8 rounded-2xl border border-[#1a1a1a] shadow-xl relative overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top_right,_rgba(120,_120,_120,_0.05),_transparent_60%)]"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_bottom_left,_rgba(120,_120,_120,_0.05),_transparent_60%)]"}),(0,r.jsxs)("div",{className:"flex flex-col items-center text-center relative z-10",children:[(0,r.jsx)(l.P.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20,delay:.1},className:"w-16 h-16 bg-[#1a1a1a] rounded-full flex items-center justify-center mb-6 border border-[#333333]",children:(0,r.jsx)(y.A,{className:"w-8 h-8 text-white"})}),(0,r.jsxs)(l.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2,duration:.4},className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-2xl font-bold text-white",children:"You're on the list!"}),(0,r.jsx)("p",{className:"text-[#a0a0a0] text-sm max-w-sm",children:"Thank you for joining our waitlist. We'll notify you when it's your turn to access SafeCircle."}),a&&(0,r.jsx)(ReferralSystem,{referralCode:a}),(0,r.jsx)("div",{className:"pt-6 mt-6 border-t border-[#222222]",children:(0,r.jsx)(m.$,{onClick:t,variant:"outline",className:"border-[#333333] bg-[#111111] text-white hover:bg-[#1a1a1a] text-sm font-normal",children:"Submit another request"})})]})]})]},"success")}},2142:(e,a,t)=>{t.d(a,{J:()=>d});var r=t(6384),s=t(6636),i=t(1044),l=t(88),n=t(5515);let o=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(i.b,{ref:a,className:(0,n.cn)(o(),t),...s})});d.displayName=i.b.displayName},2944:(e,a,t)=>{t.d(a,{p:()=>l});var r=t(6384),s=t(6636),i=t(5515);let l=s.forwardRef((e,a)=>{let{className:t,type:s,...l}=e;return(0,r.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-[#444444] focus-visible:border-[#444444] disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200",t),ref:a,...l})});l.displayName="Input"},5212:(e,a,t)=>{t.d(a,{$:()=>d});var r=t(6384),s=t(6636),i=t(5167),l=t(88),n=t(5515);let o=(0,l.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 transition-all duration-200",{variants:{variant:{default:"bg-white text-black hover:bg-[#f0f0f0]",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-[#333333] bg-transparent hover:bg-[#1a1a1a] hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,a)=>{let{className:t,variant:s,size:l,asChild:d=!1,...c}=e,m=d?i.DX:"button";return(0,r.jsx)(m,{className:(0,n.cn)(o({variant:s,size:l,className:t})),ref:a,...c})});d.displayName="Button"},5515:(e,a,t)=>{t.d(a,{cn:()=>i});var r=t(4534),s=t(1639);function i(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,s.QP)((0,r.$)(a))}},7988:(e,a,t)=>{t.d(a,{CI:()=>d,Hh:()=>n,Jv:()=>o,Sn:()=>l,wV:()=>c});var r=t(7935),s=t(7550),i=t(4401);let l=(0,r.MB)({plugins:[(0,s.NA)({onTwoFactorRedirect(){window.location.href="/two-factor"}}),(0,s.KM)(),(0,s.jz)()],fetchOptions:{onError(e){429===e.error.status&&i.oR.error("Too many requests. Please try again later.")}}}),{signUp:n,signIn:o,signOut:d,useSession:c}=l;l.$store.listen("$sessionSignal",async()=>{})},9100:(e,a,t)=>{t.d(a,{k:()=>s});var r=t(9898);t(7946);let s=()=>{let e="https://jdlnotmcksutqqwvpdwe.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpkbG5vdG1ja3N1dHFxd3ZwZHdlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcxMjU1NDksImV4cCI6MjA2MjcwMTU0OX0.C-n9E7yak-aThGA1q3c-DR-oezGMeHzpfXmH5cXYbLU";if(!e||!a)throw Error("Missing Supabase environment variables");return(0,r.UU)(e,a)}},9934:(e,a,t)=>{t.d(a,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>l,aR:()=>n,wL:()=>m});var r=t(6384),s=t(6636),i=t(5515);let l=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s})});l.displayName="Card";let n=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...s})});n.displayName="CardHeader";let o=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",t),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",t),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,i.cn)("p-6 pt-0",t),...s})});c.displayName="CardContent";let m=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,i.cn)("flex items-center p-6 pt-0",t),...s})});m.displayName="CardFooter"}}]);