(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[255],{1044:(e,a,t)=>{"use strict";t.d(a,{b:()=>n});var r=t(6636),l=t(9727),i=t(6384),s=r.forwardRef((e,a)=>(0,i.jsx)(l.sG.label,{...e,ref:a,onMouseDown:a=>{var t;a.target.closest("button, input, select, textarea")||(null==(t=e.onMouseDown)||t.call(e,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));s.displayName="Label";var n=s},1116:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(4287).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2142:(e,a,t)=>{"use strict";t.d(a,{J:()=>d});var r=t(6384),l=t(6636),i=t(1044),s=t(88),n=t(5515);let o=(0,s.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)(i.b,{ref:a,className:(0,n.cn)(o(),t),...l})});d.displayName=i.b.displayName},2944:(e,a,t)=>{"use strict";t.d(a,{p:()=>s});var r=t(6384),l=t(6636),i=t(5515);let s=l.forwardRef((e,a)=>{let{className:t,type:l,...s}=e;return(0,r.jsx)("input",{type:l,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-[#444444] focus-visible:border-[#444444] disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200",t),ref:a,...s})});s.displayName="Input"},5212:(e,a,t)=>{"use strict";t.d(a,{$:()=>d});var r=t(6384),l=t(6636),i=t(5167),s=t(88),n=t(5515);let o=(0,s.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 transition-all duration-200",{variants:{variant:{default:"bg-white text-black hover:bg-[#f0f0f0]",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-[#333333] bg-transparent hover:bg-[#1a1a1a] hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=l.forwardRef((e,a)=>{let{className:t,variant:l,size:s,asChild:d=!1,...c}=e,u=d?i.DX:"button";return(0,r.jsx)(u,{className:(0,n.cn)(o({variant:l,size:s,className:t})),ref:a,...c})});d.displayName="Button"},5515:(e,a,t)=>{"use strict";t.d(a,{cn:()=>i});var r=t(4534),l=t(1639);function i(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,l.QP)((0,r.$)(a))}},7320:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>b});var r=t(6384),l=t(6636),i=t(4582),s=t(7988),n=t(2893),o=t(9934),d=t(5212),c=t(2944),u=t(2142),f=t(4401),m=t(2309),p=t(9958),x=t(1116);function y(e){let{user:a}=e,[t,y]=(0,l.useState)(!1),[b,v]=(0,l.useState)(null),[h,g]=(0,l.useState)(a.name),[j,w]=(0,l.useState)(null),[N,R]=(0,l.useState)(null),[k,P]=(0,l.useState)(!1),C=(0,i.useRouter)(),F=async e=>new Promise((a,t)=>{let r=new FileReader;r.readAsDataURL(e),r.onload=()=>a(r.result),r.onerror=e=>t(e)}),S=async()=>{if(a.email){y(!0),v(null);try{await s.Sn.sendVerificationEmail({email:a.email,callbackURL:"/account"}),f.oR.success("Verification email sent! Check your inbox for a verification link."),v("Verification email sent! Check your inbox.")}catch(e){f.oR.error((null==e?void 0:e.message)||"Failed to send verification email. Please try again later."),v("Failed to send verification email. Please try again later.")}finally{y(!1)}}},V=async()=>{P(!0);try{await s.Sn.updateUser({image:j?await F(j):void 0,name:h!==a.name?h:void 0,fetchOptions:{onSuccess:()=>{f.oR.success("Profile updated successfully"),C.refresh()},onError:e=>{f.oR.error(e.error.message)}}}),w(null),R(null)}finally{P(!1)}};return(0,r.jsx)(n.P.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{duration:.3},className:"mt-0 space-y-6",children:(0,r.jsxs)(o.Zp,{className:"border border-[#1a1a1a] bg-[#0f0f0f]/90 backdrop-blur-sm overflow-hidden",children:[(0,r.jsx)(o.aR,{children:(0,r.jsxs)(n.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:[(0,r.jsx)(o.ZB,{children:"Profile Information"}),(0,r.jsx)(o.BT,{children:"Update your profile information and email address."})]})}),(0,r.jsxs)(o.Wu,{className:"space-y-6",children:[(0,r.jsxs)(n.P.div,{className:"space-y-1",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:[(0,r.jsx)(u.J,{htmlFor:"display-name",children:"Display Name"}),(0,r.jsx)(c.p,{id:"display-name",value:h,onChange:e=>g(e.target.value),className:"bg-[#1a1a1a] border-[#333333]"})]}),(0,r.jsxs)(n.P.div,{className:"space-y-1",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:[(0,r.jsx)(u.J,{htmlFor:"image",children:"Profile Image"}),(0,r.jsxs)("div",{className:"flex items-end gap-4",children:[(N||a.image)&&(0,r.jsx)("div",{className:"relative w-16 h-16 rounded-sm overflow-hidden",children:(0,r.jsx)(m.default,{src:N||a.image||"",alt:"Profile preview",layout:"fill",objectFit:"cover"})}),(0,r.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,r.jsx)(c.p,{id:"image",type:"file",accept:"image/*",onChange:e=>{var a;let t=null==(a=e.target.files)?void 0:a[0];if(t){w(t);let e=new FileReader;e.onloadend=()=>{R(e.result)},e.readAsDataURL(t)}},className:"w-full text-muted-foreground bg-[#1a1a1a] border-[#333333]"}),N&&(0,r.jsx)(p.A,{className:"cursor-pointer",onClick:()=>{w(null),R(null)}})]})]})]}),(0,r.jsxs)(n.P.div,{className:"space-y-1",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:[(0,r.jsx)(u.J,{htmlFor:"email",children:"Email"}),(0,r.jsx)(c.p,{id:"email",type:"email",defaultValue:a.email||"",disabled:!0,className:"bg-[#1a1a1a] border-[#333333]"}),(0,r.jsx)("div",{className:"flex items-center gap-2 mt-1",children:a.emailVerified?(0,r.jsx)("span",{className:"text-xs text-green-400 bg-green-900/30 px-2 py-0.5 rounded-full font-medium",children:"Verified"}):(0,r.jsx)("span",{className:"text-xs text-yellow-400 bg-yellow-900/30 px-2 py-0.5 rounded-full font-medium",children:"Not Verified"})}),(0,r.jsx)("p",{className:"text-sm text-[#a0a0a0]",children:"Your email address is used for login and cannot be changed."}),a.email&&!a.emailVerified&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.$,{variant:"outline",size:"sm",className:"mt-2",onClick:S,disabled:t,children:t?"Sending...":"Verify Email"}),b&&(0,r.jsx)("p",{className:"text-xs mt-1 ".concat(b.startsWith("Failed")?"text-red-400":"text-green-400"),children:b})]})]})]}),(0,r.jsx)(o.wL,{children:(0,r.jsx)(n.P.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full",children:(0,r.jsx)(d.$,{className:"w-full",onClick:V,disabled:k,children:k?(0,r.jsx)(x.A,{size:15,className:"animate-spin"}):"Save changes"})})})]})})}function b(){let{data:e,isPending:a}=(0,s.wV)(),t=(0,i.useRouter)(),n=null==e?void 0:e.user;return((0,l.useEffect)(()=>{a||n||t.push("/")},[a,n,t]),a)?(0,r.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-white"})}):n?(0,r.jsx)(y,{user:n}):null}},7559:(e,a,t)=>{Promise.resolve().then(t.bind(t,7320))},7988:(e,a,t)=>{"use strict";t.d(a,{CI:()=>d,Hh:()=>n,Jv:()=>o,Sn:()=>s,wV:()=>c});var r=t(7935),l=t(7550),i=t(4401);let s=(0,r.MB)({plugins:[(0,l.NA)({onTwoFactorRedirect(){window.location.href="/two-factor"}}),(0,l.KM)(),(0,l.jz)()],fetchOptions:{onError(e){429===e.error.status&&i.oR.error("Too many requests. Please try again later.")}}}),{signUp:n,signIn:o,signOut:d,useSession:c}=s;s.$store.listen("$sessionSignal",async()=>{})},9281:(e,a,t)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"useMergedRef",{enumerable:!0,get:function(){return l}});let r=t(6636);function l(e,a){let t=(0,r.useRef)(null),l=(0,r.useRef)(null);return(0,r.useCallback)(r=>{if(null===r){let e=t.current;e&&(t.current=null,e());let a=l.current;a&&(l.current=null,a())}else e&&(t.current=i(e,r)),a&&(l.current=i(a,r))},[e,a])}function i(e,a){if("function"!=typeof e)return e.current=a,()=>{e.current=null};{let t=e(a);return"function"==typeof t?t:()=>e(null)}}("function"==typeof a.default||"object"==typeof a.default&&null!==a.default)&&void 0===a.default.__esModule&&(Object.defineProperty(a.default,"__esModule",{value:!0}),Object.assign(a.default,a),e.exports=a.default)},9934:(e,a,t)=>{"use strict";t.d(a,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>s,aR:()=>n,wL:()=>u});var r=t(6384),l=t(6636),i=t(5515);let s=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:a,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...l})});s.displayName="Card";let n=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:a,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...l})});n.displayName="CardHeader";let o=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:a,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",t),...l})});o.displayName="CardTitle";let d=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",t),...l})});d.displayName="CardDescription";let c=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:a,className:(0,i.cn)("p-6 pt-0",t),...l})});c.displayName="CardContent";let u=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:a,className:(0,i.cn)("flex items-center p-6 pt-0",t),...l})});u.displayName="CardFooter"},9958:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(4287).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},e=>{var a=a=>e(e.s=a);e.O(0,[148,893,965,690,309,951,358],()=>a(7559)),_N_E=e.O()}]);