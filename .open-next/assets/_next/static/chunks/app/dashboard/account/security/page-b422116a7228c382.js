(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[792],{2142:(e,s,a)=>{"use strict";a.d(s,{J:()=>i});var r=a(6384),t=a(6636),l=a(1044),n=a(88),o=a(5515);let d=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),i=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(l.b,{ref:s,className:(0,o.cn)(d(),a),...t})});i.displayName=l.b.displayName},2855:(e,s,a)=>{"use strict";a.d(s,{S:()=>d});var r=a(6384),t=a(6636),l=a(602),n=a(8278),o=a(5515);let d=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(l.bL,{ref:s,className:(0,o.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...t,children:(0,r.jsx)(l.C1,{className:(0,o.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(n.A,{className:"h-4 w-4"})})})});d.displayName=l.bL.displayName},2944:(e,s,a)=>{"use strict";a.d(s,{p:()=>n});var r=a(6384),t=a(6636),l=a(5515);let n=t.forwardRef((e,s)=>{let{className:a,type:t,...n}=e;return(0,r.jsx)("input",{type:t,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-[#444444] focus-visible:border-[#444444] disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200",a),ref:s,...n})});n.displayName="Input"},3471:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>_});var r=a(6384),t=a(6636),l=a(4582),n=a(7988),o=a(9934),d=a(5212),i=a(2944),c=a(2142),u=a(5041),m=a(9322),x=a(1116),h=a(2965),f=a(4651),p=a(4986),g=a(3310),w=a(5914),j=a(716),y=a(6276),v=a(5515);let b=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:s,className:(0,v.cn)("w-full caption-bottom text-sm",a),...t})})});b.displayName="Table";let N=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("thead",{ref:s,className:(0,v.cn)("[&_tr]:border-b",a),...t})});N.displayName="TableHeader";let k=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("tbody",{ref:s,className:(0,v.cn)("[&_tr:last-child]:border-0",a),...t})});k.displayName="TableBody",t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("tfoot",{ref:s,className:(0,v.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...t})}).displayName="TableFooter";let C=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("tr",{ref:s,className:(0,v.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...t})});C.displayName="TableRow";let P=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("th",{ref:s,className:(0,v.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...t})});P.displayName="TableHead";let S=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("td",{ref:s,className:(0,v.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...t})});S.displayName="TableCell",t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("caption",{ref:s,className:(0,v.cn)("mt-4 text-sm text-muted-foreground",a),...t})}).displayName="TableCaption";var R=a(5751),A=a(6015);let F=t.forwardRef((e,s)=>{let{className:a,...l}=e,[n,o]=t.useState(!1),c=""===l.value||void 0===l.value||l.disabled;return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(i.p,{type:n?"text":"password",name:"password_fake",className:(0,v.cn)("hide-password-toggle pr-10",a),ref:s,...l}),(0,r.jsxs)(d.$,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>o(e=>!e),disabled:c,children:[n&&!c?(0,r.jsx)(R.A,{className:"h-4 w-4 text-muted-foreground"}):(0,r.jsx)(A.A,{className:"h-4 w-4 text-muted-foreground"}),(0,r.jsx)("span",{className:"sr-only",children:n?"Hide password":"Show password"})]}),(0,r.jsx)("style",{children:"\n                .hide-password-toggle::-ms-reveal,\n                .hide-password-toggle::-ms-clear {\n                    visibility: hidden;\n                    pointer-events: none;\n                    display: none;\n                }\n            "})]})});F.displayName="PasswordInput";var E=a(2855),z=a(3113),T=a(4649),O=a(4401),L=a(8278),$=a(1807);function B(e){let{textToCopy:s}=e,[a,l]=(0,t.useState)(!1),n=async()=>{try{await navigator.clipboard.writeText(s),l(!0),O.oR.success("Copied to clipboard"),setTimeout(()=>l(!1),2e3)}catch(e){O.oR.error("Failed to copy to clipboard")}};return(0,r.jsx)(d.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:n,children:a?(0,r.jsx)(L.A,{className:"h-4 w-4"}):(0,r.jsx)($.A,{className:"h-4 w-4"})})}function M(e){let{user:s,activeSessions:a=[]}=e,[l,g]=(0,t.useState)(),[w,j]=(0,t.useState)(!1),[v,b]=(0,t.useState)(""),[N,k]=(0,t.useState)(!1),[C,P]=(0,t.useState)(""),[S,R]=(0,t.useState)(!1),[A,E]=(0,t.useState)(!1),[L,$]=(0,t.useState)(!1),[M,_]=(0,t.useState)(""),[H,U]=(0,t.useState)(!1),[G,I]=(0,t.useState)(!1),{data:Q}=(0,n.wV)();return(0,r.jsxs)("div",{className:"mt-0 space-y-6",children:[(0,r.jsxs)(o.Zp,{className:"border border-[#1a1a1a] bg-[#0f0f0f]/90 backdrop-blur-sm overflow-hidden",children:[(0,r.jsxs)(o.aR,{children:[(0,r.jsx)(o.ZB,{children:"Active Sessions"}),(0,r.jsx)(o.BT,{children:"Manage your active sessions across devices."})]}),(0,r.jsx)(o.Wu,{children:(0,r.jsx)("div",{className:"border-l-2 px-2 w-max gap-1 flex flex-col",children:0===a.length?(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:"No active sessions"}):a.filter(e=>e.userAgent).map(e=>(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-black font-medium dark:text-white",children:["mobile"===new z.O(e.userAgent||"").getDevice().type?(0,r.jsx)(u.A,{size:16}):(0,r.jsx)(m.A,{size:16}),new z.O(e.userAgent||"").getOS().name,","," ",new z.O(e.userAgent||"").getBrowser().name,(0,r.jsx)("button",{className:"text-red-500 opacity-80 cursor-pointer text-xs border-muted-foreground border-red-600 underline",onClick:async()=>{g(e.id);let s=await n.Sn.revokeSession({token:e.token});s.error?O.oR.error(s.error.message):O.oR.success("Session terminated successfully"),g(void 0)},children:l===e.id?(0,r.jsx)(x.A,{size:15,className:"animate-spin"}):e.current?"Sign Out":"Terminate"})]})},e.id))})})]}),(0,r.jsxs)(o.Zp,{className:"border border-[#1a1a1a] bg-[#0f0f0f]/90 backdrop-blur-sm overflow-hidden",children:[(0,r.jsxs)(o.aR,{children:[(0,r.jsx)(o.ZB,{children:"Two Factor Authentication"}),(0,r.jsx)(o.BT,{children:"Add an extra layer of security to your account."})]}),(0,r.jsx)(o.Wu,{children:(0,r.jsx)("div",{className:"flex flex-col gap-2",children:(0,r.jsxs)("div",{className:"flex gap-2",children:[!!(null==Q?void 0:Q.user.twoFactorEnabled)&&(0,r.jsxs)(y.lG,{children:[(0,r.jsx)(y.zM,{asChild:!0,children:(0,r.jsxs)(d.$,{variant:"outline",className:"gap-2",children:[(0,r.jsx)(h.A,{size:16}),(0,r.jsx)("span",{className:"md:text-sm text-xs",children:"Scan QR Code"})]})}),(0,r.jsxs)(y.Cf,{className:"sm:max-w-[425px] w-11/12",children:[(0,r.jsxs)(y.c7,{children:[(0,r.jsx)(y.L3,{children:"Scan QR Code"}),(0,r.jsx)(y.rr,{children:"Scan the QR code with your TOTP app"})]}),C?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)(T.Ay,{value:C})}),(0,r.jsxs)("div",{className:"flex gap-2 items-center justify-center",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Copy URI to clipboard"}),(0,r.jsx)(B,{textToCopy:C})]})]}):(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)(F,{value:v,onChange:e=>b(e.target.value),placeholder:"Enter Password"}),(0,r.jsx)(d.$,{onClick:async()=>{if(v.length<8)return void O.oR.error("Password must be at least 8 characters");await n.Sn.twoFactor.getTotpUri({password:v},{onSuccess(e){P(e.data.totpURI)}}),b("")},children:"Show QR Code"})]})]})]}),(0,r.jsxs)(y.lG,{open:N,onOpenChange:k,children:[(0,r.jsx)(y.zM,{asChild:!0,children:(0,r.jsxs)(d.$,{variant:(null==Q?void 0:Q.user.twoFactorEnabled)?"destructive":"outline",className:"gap-2",children:[(null==Q?void 0:Q.user.twoFactorEnabled)?(0,r.jsx)(f.A,{size:16}):(0,r.jsx)(p.A,{size:16}),(0,r.jsx)("span",{className:"md:text-sm text-xs",children:(null==Q?void 0:Q.user.twoFactorEnabled)?"Disable 2FA":"Enable 2FA"})]})}),(0,r.jsxs)(y.Cf,{className:"sm:max-w-[425px] w-11/12",children:[(0,r.jsxs)(y.c7,{children:[(0,r.jsx)(y.L3,{children:(null==Q?void 0:Q.user.twoFactorEnabled)?"Disable 2FA":"Enable 2FA"}),(0,r.jsx)(y.rr,{children:(null==Q?void 0:Q.user.twoFactorEnabled)?"Disable the second factor authentication from your account":"Enable 2FA to secure your account"})]}),C?(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)(T.Ay,{value:C})}),(0,r.jsx)(c.J,{htmlFor:"password",children:"Scan the QR code with your TOTP app"}),(0,r.jsx)(i.p,{value:v,onChange:e=>b(e.target.value),placeholder:"Enter OTP"})]}):(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)(c.J,{htmlFor:"password",children:"Password"}),(0,r.jsx)(F,{id:"password",placeholder:"Password",value:v,onChange:e=>b(e.target.value)})]}),(0,r.jsx)(y.Es,{children:(0,r.jsx)(d.$,{disabled:w,onClick:async()=>{if(v.length<8&&!C)return void O.oR.error("Password must be at least 8 characters");if(j(!0),null==Q?void 0:Q.user.twoFactorEnabled)await n.Sn.twoFactor.disable({password:v,fetchOptions:{onError(e){O.oR.error(e.error.message)},onSuccess(){(0,O.oR)("2FA disabled successfully"),k(!1)}}});else{if(C)return void await n.Sn.twoFactor.verifyTotp({code:v,fetchOptions:{onError(e){j(!1),b(""),O.oR.error(e.error.message)},onSuccess(){(0,O.oR)("2FA enabled successfully"),P(""),j(!1),b(""),k(!1)}}});await n.Sn.twoFactor.enable({password:v,fetchOptions:{onError(e){O.oR.error(e.error.message)},onSuccess(e){P(e.data.totpURI)}}})}j(!1),b("")},children:w?(0,r.jsx)(x.A,{size:15,className:"animate-spin"}):(null==Q?void 0:Q.user.twoFactorEnabled)?"Disable 2FA":"Enable 2FA"})})]})]})]})})})]}),(0,r.jsxs)(o.Zp,{className:"border border-[#1a1a1a] bg-[#0f0f0f]/90 backdrop-blur-sm overflow-hidden",children:[(0,r.jsxs)(o.aR,{children:[(0,r.jsx)(o.ZB,{children:"Passkeys"}),(0,r.jsx)(o.BT,{children:"Manage your passkeys for secure authentication."})]}),(0,r.jsx)(o.Wu,{children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(J,{}),(0,r.jsx)(Z,{})]})})]}),(0,r.jsxs)(o.Zp,{className:"border border-[#1a1a1a] bg-[#0f0f0f]/90 backdrop-blur-sm overflow-hidden",children:[(0,r.jsxs)(o.aR,{children:[(0,r.jsx)(o.ZB,{children:"Change Password"}),(0,r.jsx)(o.BT,{children:"Update your password to keep your account secure."})]}),(0,r.jsx)(o.Wu,{children:(0,r.jsx)(D,{})})]})]})}function D(){let[e,s]=(0,t.useState)(""),[a,l]=(0,t.useState)(""),[o,i]=(0,t.useState)(""),[u,m]=(0,t.useState)(!1),[h,f]=(0,t.useState)(!1),[p,g]=(0,t.useState)(!1);return(0,r.jsxs)(y.lG,{open:h,onOpenChange:f,children:[(0,r.jsx)(y.zM,{asChild:!0,children:(0,r.jsxs)(d.$,{className:"gap-2 z-10",variant:"outline",size:"sm",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{fill:"currentColor",d:"M2.5 18.5v-1h19v1zm.535-5.973l-.762-.442l.965-1.693h-1.93v-.884h1.93l-.965-1.642l.762-.443L4 9.066l.966-1.643l.761.443l-.965 1.642h1.93v.884h-1.93l.965 1.693l-.762.442L4 10.835zm8 0l-.762-.442l.966-1.693H9.308v-.884h1.93l-.965-1.642l.762-.443L12 9.066l.966-1.643l.761.443l-.965 1.642h1.93v.884h-1.93l.965 1.693l-.762.442L12 10.835zm8 0l-.762-.442l.966-1.693h-1.931v-.884h1.93l-.965-1.642l.762-.443L20 9.066l.966-1.643l.761.443l-.965 1.642h1.93v.884h-1.93l.965 1.693l-.762.442L20 10.835z"})}),(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:"Change Password"})]})}),(0,r.jsxs)(y.Cf,{className:"sm:max-w-[425px] w-11/12",children:[(0,r.jsxs)(y.c7,{children:[(0,r.jsx)(y.L3,{children:"Change Password"}),(0,r.jsx)(y.rr,{children:"Change your password"})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(c.J,{htmlFor:"current-password",children:"Current Password"}),(0,r.jsx)(F,{value:e,onChange:e=>s(e.target.value),autoComplete:"new-password",placeholder:"Password"}),(0,r.jsx)(c.J,{htmlFor:"new-password",children:"New Password"}),(0,r.jsx)(F,{value:a,onChange:e=>l(e.target.value),autoComplete:"new-password",placeholder:"New Password"}),(0,r.jsx)(c.J,{htmlFor:"password",children:"Confirm Password"}),(0,r.jsx)(F,{value:o,onChange:e=>i(e.target.value),autoComplete:"new-password",placeholder:"Confirm Password"}),(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsx)(E.S,{onCheckedChange:e=>e?g(!0):g(!1)}),(0,r.jsx)("p",{className:"text-sm",children:"Sign out from other devices"})]})]}),(0,r.jsx)(y.Es,{children:(0,r.jsx)(d.$,{onClick:async()=>{if(a!==o)return void O.oR.error("Passwords do not match");if(a.length<8)return void O.oR.error("Password must be at least 8 characters");m(!0);let r=await n.Sn.changePassword({newPassword:a,currentPassword:e,revokeOtherSessions:p});m(!1),r.error?O.oR.error(r.error.message||"Couldn't change your password! Make sure it's correct"):(f(!1),O.oR.success("Password changed successfully"),s(""),l(""),i(""))},children:u?(0,r.jsx)(x.A,{size:15,className:"animate-spin"}):"Change Password"})})]})]})}function J(){let[e,s]=(0,t.useState)(!1),[a,l]=(0,t.useState)(""),[o,u]=(0,t.useState)(!1),m=async()=>{if(!a)return void O.oR.error("Passkey name is required");u(!0);let e=await n.Sn.passkey.addPasskey({name:a});(null==e?void 0:e.error)?O.oR.error(null==e?void 0:e.error.message):(s(!1),O.oR.success("Passkey added successfully. You can now use it to login.")),u(!1)};return(0,r.jsxs)(y.lG,{open:e,onOpenChange:s,children:[(0,r.jsx)(y.zM,{asChild:!0,children:(0,r.jsxs)(d.$,{variant:"outline",className:"gap-2 text-xs md:text-sm",children:[(0,r.jsx)(g.A,{size:15}),"Add New Passkey"]})}),(0,r.jsxs)(y.Cf,{className:"sm:max-w-[425px] w-11/12",children:[(0,r.jsxs)(y.c7,{children:[(0,r.jsx)(y.L3,{children:"Add New Passkey"}),(0,r.jsx)(y.rr,{children:"Create a new passkey to securely access your account without a password."})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(c.J,{htmlFor:"passkey-name",children:"Passkey Name"}),(0,r.jsx)(i.p,{id:"passkey-name",value:a,onChange:e=>l(e.target.value)})]}),(0,r.jsx)(y.Es,{children:(0,r.jsx)(d.$,{disabled:o,type:"submit",onClick:m,className:"w-full",children:o?(0,r.jsx)(x.A,{size:15,className:"animate-spin"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w.A,{className:"mr-2 h-4 w-4"}),"Create Passkey"]})})})]})]})}function Z(){let{data:e}=n.Sn.useListPasskeys(),[s,a]=(0,t.useState)(!1),[l,o]=(0,t.useState)(""),[u,m]=(0,t.useState)(!1),[h,f]=(0,t.useState)(!1),p=async()=>{if(!l)return void O.oR.error("Passkey name is required");m(!0);let e=await n.Sn.passkey.addPasskey({name:l});m(!1),(null==e?void 0:e.error)?O.oR.error(null==e?void 0:e.error.message):O.oR.success("Passkey added successfully. You can now use it to login.")};return(0,r.jsxs)(y.lG,{open:s,onOpenChange:a,children:[(0,r.jsx)(y.zM,{asChild:!0,children:(0,r.jsxs)(d.$,{variant:"outline",className:"text-xs md:text-sm",children:[(0,r.jsx)(w.A,{className:"mr-2 h-4 w-4"}),(0,r.jsxs)("span",{children:["Passkeys ",(null==e?void 0:e.length)?"[".concat(null==e?void 0:e.length,"]"):""]})]})}),(0,r.jsxs)(y.Cf,{className:"sm:max-w-[425px] w-11/12",children:[(0,r.jsxs)(y.c7,{children:[(0,r.jsx)(y.L3,{children:"Passkeys"}),(0,r.jsx)(y.rr,{children:"List of passkeys"})]}),(null==e?void 0:e.length)?(0,r.jsxs)(b,{children:[(0,r.jsx)(N,{children:(0,r.jsx)(C,{children:(0,r.jsx)(P,{children:"Name"})})}),(0,r.jsx)(k,{children:e.map(e=>(0,r.jsxs)(C,{className:"flex  justify-between items-center",children:[(0,r.jsx)(S,{children:e.name||"My Passkey"}),(0,r.jsx)(S,{className:"text-right",children:(0,r.jsx)("button",{onClick:async()=>{await n.Sn.passkey.deletePasskey({id:e.id,fetchOptions:{onRequest:()=>{f(!0)},onSuccess:()=>{(0,O.oR)("Passkey deleted successfully"),f(!1)},onError:e=>{O.oR.error(e.error.message),f(!1)}}})},children:h?(0,r.jsx)(x.A,{size:15,className:"animate-spin"}):(0,r.jsx)(j.A,{size:15,className:"cursor-pointer text-red-600"})})})]},e.id))})]}):(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"No passkeys found"}),!(null==e?void 0:e.length)&&(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)(c.J,{htmlFor:"passkey-name",className:"text-sm",children:"New Passkey"}),(0,r.jsx)(i.p,{id:"passkey-name",value:l,onChange:e=>o(e.target.value),placeholder:"My Passkey"})]}),(0,r.jsx)(d.$,{type:"submit",onClick:p,className:"w-full",children:u?(0,r.jsx)(x.A,{size:15,className:"animate-spin"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w.A,{className:"mr-2 h-4 w-4"}),"Create Passkey"]})})]}),(0,r.jsx)(y.Es,{children:(0,r.jsx)(d.$,{onClick:()=>a(!1),children:"Close"})})]})]})}function _(){let{data:e,isPending:s}=(0,n.wV)(),a=(0,l.useRouter)(),o=null==e?void 0:e.user,[d,i]=(0,t.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[c,u]=(0,t.useState)(null),[m,x]=(0,t.useState)(null),[h,f]=(0,t.useState)(!1),[p,g]=(0,t.useState)({google:!1,github:!1,passkey:!1});(0,t.useEffect)(()=>{s||o||a.push("/")},[s,o,a]),(0,t.useEffect)(()=>{o&&(async()=>{try{g({google:!1,github:!1,passkey:!1})}catch(e){console.error("Error checking connected accounts:",e)}})()},[o]);let w=async e=>{if(e.preventDefault(),f(!0),u(null),x(null),d.newPassword!==d.confirmPassword){u("Passwords do not match"),f(!1);return}try{let e=await fetch("/api/auth/change-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:d.currentPassword,newPassword:d.newPassword})});if(!e.ok){let s=await e.json();throw Error(s.message||"Failed to change password")}x("Password changed successfully"),i({currentPassword:"",newPassword:"",confirmPassword:""})}catch(e){u(e.message||"Failed to change password"),console.error("Error changing password:",e)}finally{f(!1)}},j=async e=>{try{console.log("Connecting to ".concat(e,"...")),await new Promise(e=>setTimeout(e,1e3)),g(s=>({...s,[e]:!0}))}catch(s){console.error("Error connecting to ".concat(e,":"),s)}},y=async()=>{try{console.log("Registering passkey..."),await new Promise(e=>setTimeout(e,1e3)),g(e=>({...e,passkey:!0}))}catch(e){console.error("Error registering passkey:",e)}};return s?(0,r.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-white"})}):o?(0,r.jsx)(M,{user:o,handlePasswordChange:w,passwordData:d,setPasswordData:i,passwordError:c,passwordSuccess:m,isChangingPassword:h,connectedAccounts:p,connectProvider:j,registerPasskey:y}):null}},3934:(e,s,a)=>{Promise.resolve().then(a.bind(a,3471))},5212:(e,s,a)=>{"use strict";a.d(s,{$:()=>i});var r=a(6384),t=a(6636),l=a(5167),n=a(88),o=a(5515);let d=(0,n.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 transition-all duration-200",{variants:{variant:{default:"bg-white text-black hover:bg-[#f0f0f0]",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-[#333333] bg-transparent hover:bg-[#1a1a1a] hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),i=t.forwardRef((e,s)=>{let{className:a,variant:t,size:n,asChild:i=!1,...c}=e,u=i?l.DX:"button";return(0,r.jsx)(u,{className:(0,o.cn)(d({variant:t,size:n,className:a})),ref:s,...c})});i.displayName="Button"},5515:(e,s,a)=>{"use strict";a.d(s,{cn:()=>l});var r=a(4534),t=a(1639);function l(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,t.QP)((0,r.$)(s))}},6276:(e,s,a)=>{"use strict";a.d(s,{Cf:()=>m,Es:()=>h,L3:()=>f,c7:()=>x,lG:()=>d,rr:()=>p,zM:()=>i});var r=a(6384),t=a(6636),l=a(180),n=a(9958),o=a(5515);let d=l.bL,i=l.l9,c=l.ZL;l.bm;let u=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(l.hJ,{ref:s,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...t})});u.displayName=l.hJ.displayName;let m=t.forwardRef((e,s)=>{let{className:a,children:t,...d}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(u,{}),(0,r.jsxs)(l.UC,{ref:s,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...d,children:[t,(0,r.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(n.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=l.UC.displayName;let x=e=>{let{className:s,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...a})};x.displayName="DialogHeader";let h=e=>{let{className:s,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a})};h.displayName="DialogFooter";let f=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(l.hE,{ref:s,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",a),...t})});f.displayName=l.hE.displayName;let p=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(l.VY,{ref:s,className:(0,o.cn)("text-sm text-muted-foreground",a),...t})});p.displayName=l.VY.displayName},7988:(e,s,a)=>{"use strict";a.d(s,{CI:()=>i,Hh:()=>o,Jv:()=>d,Sn:()=>n,wV:()=>c});var r=a(7935),t=a(7550),l=a(4401);let n=(0,r.MB)({plugins:[(0,t.NA)({onTwoFactorRedirect(){window.location.href="/two-factor"}}),(0,t.KM)(),(0,t.jz)()],fetchOptions:{onError(e){429===e.error.status&&l.oR.error("Too many requests. Please try again later.")}}}),{signUp:o,signIn:d,signOut:i,useSession:c}=n;n.$store.listen("$sessionSignal",async()=>{})},9934:(e,s,a)=>{"use strict";a.d(s,{BT:()=>i,Wu:()=>c,ZB:()=>d,Zp:()=>n,aR:()=>o,wL:()=>u});var r=a(6384),t=a(6636),l=a(5515);let n=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...t})});n.displayName="Card";let o=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...t})});o.displayName="CardHeader";let d=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...t})});d.displayName="CardTitle";let i=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",a),...t})});i.displayName="CardDescription";let c=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",a),...t})});c.displayName="CardContent";let u=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",a),...t})});u.displayName="CardFooter"}},e=>{var s=s=>e(e.s=s);e.O(0,[148,965,839,798,309,951,358],()=>s(3934)),_N_E=e.O()}]);